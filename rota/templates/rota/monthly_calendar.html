{% extends "rota/base.html" %}

{% block title %}Monthly rota – {{ month_name }} {{ year }}{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-6 space-y-6">

  <!-- PAGE HEADER -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
    <h1 class="text-2xl font-semibold tracking-tight">
      Monthly rota – {{ month_name }} {{ year }}
    </h1>

    <div class="flex gap-4 text-sm font-medium">
      <a
        href="{% url 'monthly_calendar' prev_year prev_month %}"
        class="text-emerald-700 hover:text-emerald-900 transition"
      >
        ← Previous
      </a>
      <a
        href="{% url 'monthly_calendar' next_year next_month %}"
        class="text-emerald-700 hover:text-emerald-900 transition"
      >
        Next →
      </a>
    </div>
  </div>

  <!-- LEGEND -->
  <div class="flex flex-wrap gap-4 text-sm">
    <div class="flex items-center gap-2">
      <span class="w-3 h-3 rounded bg-emerald-600"></span>
      <span>Today</span>
    </div>
    <div class="flex items-center gap-2">
      <span class="w-3 h-3 rounded bg-emerald-200"></span>
      <span>Has rota</span>
    </div>
    <div class="flex items-center gap-2">
      <span class="w-3 h-3 rounded bg-slate-200"></span>
      <span>Other month</span>
    </div>
    <div class="flex items-center gap-2">
      <span class="w-3 h-3 rounded bg-slate-100"></span>
      <span>Past days</span>
    </div>
  </div>

  <!-- CALENDAR CARD -->
  <div class="overflow-x-auto rounded-xl bg-white shadow ring-1 ring-slate-200">
    <table class="w-full border-collapse text-center text-sm">
      <thead class="bg-slate-50">
        <tr class="text-slate-600 font-medium">
          <th class="p-3">Mon</th>
          <th class="p-3">Tue</th>
          <th class="p-3">Wed</th>
          <th class="p-3">Thu</th>
          <th class="p-3">Fri</th>
          <th class="p-3">Sat</th>
          <th class="p-3">Sun</th>
        </tr>
      </thead>

      <tbody>
        {% for week in weeks %}
          <tr class="border-t border-slate-200">
            {% for d in week %}
              {% if d.month != month %}
                <td class="p-3 bg-slate-100 text-slate-400">
                  {{ d.day }}
                </td>
              {% else %}
                <td class="p-3">
                  <a
                    href="{% url 'daily_rota' d.year d.month d.day %}"
                    class="
                      block rounded-lg p-2 transition
                      {% if d == today %}
                        bg-emerald-600 text-white font-semibold
                      {% elif d in rotadays %}
                        bg-emerald-100 text-emerald-900 hover:bg-emerald-200
                      {% elif d < today %}
                        text-slate-400
                      {% else %}
                        hover:bg-slate-100
                      {% endif %}
                    "
                  >
                    {{ d.day }}
                  </a>
                </td>
              {% endif %}
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
