<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Rota Portal</title>
    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: #f5f7fb;
        margin: 0;
        padding: 0;
      }
      .page-wrap {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .card {
        background: #ffffff;
        border-radius: 12px;
        padding: 2rem 2.5rem;
        box-shadow: 0 12px 30px rgba(15, 23, 42, 0.15);
        max-width: 520px;
        width: 100%;
      }
      h1 {
        margin-top: 0;
        margin-bottom: 0.5rem;
        font-size: 1.8rem;
        color: #111827;
      }
      .subtitle {
        margin: 0 0 1.5rem 0;
        color: #6b7280;
        font-size: 0.95rem;
      }
      .badge {
        display: inline-block;
        padding: 0.25rem 0.6rem;
        border-radius: 999px;
        font-size: 0.75rem;
        font-weight: 600;
      }
      .badge-manager {
        background: #ecfdf3;
        color: #15803d;
        border: 1px solid #bbf7d0;
      }
      .badge-viewer {
        background: #eff6ff;
        color: #1d4ed8;
        border: 1px solid #bfdbfe;
      }
      .badge-unauth {
        background: #fef3c7;
        color: #92400e;
        border: 1px solid #fde68a;
      }
      .info-row {
        margin-bottom: 1rem;
        font-size: 0.95rem;
        color: #374151;
      }
      .info-label {
        font-weight: 600;
        color: #4b5563;
      }
      .btn-row {
        margin-top: 1.5rem;
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
      }
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.6rem 1.1rem;
        border-radius: 999px;
        font-size: 0.9rem;
        font-weight: 600;
        border: none;
        text-decoration: none;
        cursor: pointer;
      }
      .btn-primary {
        background: #2563eb;
        color: white;
      }
      .btn-outline {
        background: transparent;
        color: #111827;
        border: 1px solid #d1d5db;
      }
      .hint {
        margin-top: 0.75rem;
        font-size: 0.78rem;
        color: #6b7280;
      }
    </style>
  </head>
  <body>
    <div class="page-wrap">
      <div class="card">
        <h1>Cleanroom Rota Portal</h1>
        <p class="subtitle">
          Sign in to view the daily rota and, if authorised, manage assignments.
        </p>

        {% if user.is_authenticated %}
        <div class="info-row">
          <span class="info-label">Signed in as:</span>
          {{ user.get_full_name|default:user.username }}
        </div>

        <div class="info-row">
          <span class="info-label">Access level:</span>
          {% if is_manager %}
          <span class="badge badge-manager">Rota Manager</span>
          <div class="hint">
            You can create and edit rota assignments for the cleanrooms.
          </div>
          {% else %}
          <span class="badge badge-viewer">Rota Viewer</span>
          <div class="hint">
            You can view rota information but cannot make changes.
          </div>
          {% endif %}
        </div>

        <div class="btn-row">
          <a href="{% url 'current_month' %}" class="btn btn-primary">
            View rota calendar
          </a>
          {% if user.is_staff %}
          <a href="/admin/" class="btn btn-outline">Admin site</a>
          {% endif %}
          <a href="{% url 'logout' %}" class="btn btn-outline">Log out</a>
        </div>

        {% else %}
        <div class="info-row">
          <span class="info-label">Status:</span>
          <span class="badge badge-unauth">Not signed in</span>
        </div>

        <p class="info-row">
          You must sign in with your rota account to access the suite rota. If
          you believe you should have rota manager rights, please speak to your
          Production Lead or system administrator.
        </p>

        <div class="btn-row">
          <a href="{% url 'login' %}" class="btn btn-primary">Log in to rota</a>
        </div>

        <p class="hint">
          After logging in, the system will automatically check whether you have
          <strong>Rota Manager</strong>
          permissions.
        </p>
        {% endif %}
      </div>
    </div>
  </body>
</html>
